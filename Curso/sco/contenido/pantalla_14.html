<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Language" content="es" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Last-Modified" content="0" />
    <meta http-equiv="Cache-Control" content="no-cache, mustrevalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <script src="js/jquery-2.1.1.min.js"></script>
    <script src="js/preloadjs-0.6.2.min.js"></script>
    <script src="js/anime.min.js"></script>
    <script src="js/Animations.js"></script>
    <script src="js/preCarga.js"></script>
    <link rel="stylesheet" href="css/Style.css" type="text/css" charset="utf-8" />
    <title>Pantalla 14</title>
  </head>

  <body>
    <div id="contenido">
      <img id="bg" class="element" _origeny="0" _origenx="0" src="images/bg.png" />
      <img id="fondo" class="element" _origeny="0" _origenx="0" src="images/pantalla14/bg.png" />
      <img id="imagen1" class="element" _origeny="0" _origenx="0" src="images/pantalla14/img01.png" />
      <img id="imagen2" class="element" _origeny="0" _origenx="0" src="images/pantalla14/img02.png" />
      <img id="imagen3" class="element" _origeny="0" _origenx="0" src="images/pantalla14/img03.png" />

      <img id="btn1" class="element btn" _origeny="300" _origenx="050" src="images/pantalla14/btn01.png" />
      <img id="btn2" class="element btn" _origeny="300" _origenx="460" src="images/pantalla14/btn02.png" />
      <img id="btn3" class="element btn" _origeny="300" _origenx="870" src="images/pantalla14/btn03.png" />

      <img id="pop1" class="element" _origeny="0" _origenx="0" src="images/pantalla14/info01.png" />
      <img id="pop2" class="element" _origeny="0" _origenx="0" src="images/pantalla14/info02.png" />
      <img id="pop3" class="element" _origeny="0" _origenx="0" src="images/pantalla14/info03.png" />
      <img id="pop4" class="element" _origeny="0" _origenx="0" src="images/pantalla14/info04.png" />

      <div id="der" class="element btn" _origeny="355" _origenx="1065" style="width: 80px; height: 80px"></div>
      <div id="izq" class="element btn" _origeny="355" _origenx="155" style="width: 80px; height: 80px"></div>
      <!-- <div id="cerrar" class="element btn" _origeny="106" _origenx="888" style="width: 80px; height: 80px"></div> -->
      <img id="cerrar" class="element btn" _origeny="106" _origenx="888" style="width: 70px" src="images/pantalla14/cer.png" />

      <!-- cargador -->
      <img id="cargando" class="cargando" src="images/cargando.gif" />
    </div>
  </body>
  <script>
    $(document).ready(function () {
      let F = function muestraContenido() {
        entrada($("#bg"), "default", 0, 0);
        entrada($("#fondo"), "default", 0.5, 0);
        entrada($("#imagen1"), "default", 0.5, 0.2);
        entrada($("#imagen2"), "default", 0.5, 0.4);

        parent.reproducir("14_1", 0.6);
        parent.Audios["14_1"].once("end", function (e) {
          entrada($("#imagen3"), "default", 0.5, 0);
          // entrada($("#btn1"), "default", 0.5, 0);
          // entrada($("#btn2"), "default", 0.5, 0);
          // entrada($("#btn3"), "default", 0.5, 0);
          parpadea($("#btn1"), 0);
          parpadea($("#btn2"), 0);
          parpadea($("#btn3"), 0);
        });
      };

      ///////////////// 🎯 Actividad Carrusel 🎯 ////////////////
      var step = 1;
      const popups = 2;
      // Botón derecha
      $("#der").click(function () {
        if (step <= popups) {
          step++;
          enterScene();
        }
      });
      // Botón izquierda
      $("#izq").click(function () {
        if (step >= 1) {
          step--;
          enterScene();
        }
      });
      function clearScene() {
        for (let A = 0; A <= popups; A++) {
          if (A !== step) {
            salida($("#pop" + A), "default", 0.2);
          }
        }
        step == popups ? $("#der").css({ display: "none", opacity: 0 }) : $("#der").css({ display: "block", opacity: 1 });
        step == 1 ? $("#izq").css({ display: "none", opacity: 0 }) : $("#izq").css({ display: "block", opacity: 1 });
      }
      function enterScene() {
        console.log("%c" + step, "color: #00ff22;");
        switch (step) {
          case 1:
            clearScene();
            entrada($("#pop1"), "default", 0, 0);
            parent.reproducir("14_2", 0.4);
            $("#der").css({ display: "none", opacity: 0 });
            parent.Audios["14_2"].once("end", function (e) {
              parent.reproducir("14_3", 0);
            });
            parent.Audios["14_3"].once("end", function (e) {
              $("#der").css({ display: "block", opacity: 1 });
            });
            break;
          case 2:
            clearScene();
            entrada($("#pop2"), "default", 0, 0);
            $("#izq").css({ display: "none", opacity: 0 });
            parent.reproducir("14_4", 0.2);
            parent.Audios["14_4"].once("end", function (e) {
              $("#izq").css({ display: "block", opacity: 1 });
              entrada($("#cerrar"), "default", 0.5, 0);
            });
            break;
        }
      }

      ///////////////// 🎯 Actividad Botonera 🎯 ////////////////
      var noObjetos = 3;
      var pulsados = [];
      function limpia() {
        step = 1;
        for (b = 0; b <= noObjetos + 1; b++) {
          salida($("#pop" + b), "default", 0);
        }
        salida($("#cerrar"), "default", 0);
        salida($("#der"), "default", 0);
        salida($("#izq"), "default", 0);
      }
      for (let i = 0; i <= noObjetos; i++) {
        $("#btn" + i)
          .off()
          .click(function () {
            var cualBoton = parseInt($(this).attr("id").substr(3, 2));
            if (!pulsados.includes(cualBoton)) {
              pulsados.push(cualBoton);
            }
            stop($(this), 0);
            parent.enviarEnfrente();
            switch (cualBoton) {
              case 1:
                enterScene();
                break;
              case 2:
                entrada($("#pop3"), "default", 0.5, 0);
                parent.reproducir("14_5", 0.4);
                parent.Audios["14_5"].once("end", function (e) {
                  parent.reproducir("14_6", 0.4);
                });
                parent.Audios["14_6"].once("end", function (e) {
                  entrada($("#cerrar"), "default", 0.5, 0);
                });
                break;
              case 3:
                entrada($("#pop4"), "default", 0.5, 0);
                parent.reproducir("14_7", 0.4);
                parent.Audios["14_7"].once("end", function (e) {
                  parent.reproducir("14_8", 0.4);
                });
                parent.Audios["14_8"].once("end", function (e) {
                  entrada($("#cerrar"), "default", 0.5, 0);
                });
                break;
            }
          });
      }
      function watch() {
        console.log(pulsados);
        if (pulsados.length === noObjetos) {
          terminarPantalla();
        }
      }
      $("#cerrar")
        .off()
        .click(function () {
          parent.enviarAtras();
          limpia();
          watch();
        });

      preload(document.title, F);
    }); //ready
  </script>
</html>
